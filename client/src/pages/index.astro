---
import Layout from "../layouts/layout.astro";
import StudiesList from "../components/StudiesList.astro";
import { getStudiesPaginated } from "../services/Orthan";

// Obtener parámetros de paginación de la URL
const url = new URL(Astro.request.url);
const page = parseInt(url.searchParams.get("page") || "1");
// Límite fijo a 10 según requerimiento
const limit = 10;

// Obtener estudios paginados
const paginationData = await getStudiesPaginated(page, limit);
---

<Layout>
    <StudiesList
        studies={paginationData.studies}
        currentPage={paginationData.page}
        totalPages={paginationData.totalPages}
        total={paginationData.total}
        limit={paginationData.limit}
    />
</Layout>

<style>
    :global(body) {
        background: linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%);
    }
</style>
